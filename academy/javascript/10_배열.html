<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배열</title>
</head>
<body>
    <h1>배열선언하고 활용하기</h1>
    <p>
        자바스크립트에서 배열은 자바의 ArrayList랑 유사.
        1. 다수의 여러자료형의 데이터를 보관할 수 있다.
        2. 길이의 제한이없다-> 자동으로 증가, 감소함
        3. []인덱스를 이용하여 데이터에 접근함.
        * DB에서 데이터를 프론트로 가져왔을 때, DOM객체(TAG)를 가져왔을때 *배열 아님. 배열형식의 객체 ??
    </p>

    <h2>배열 선언하기</h2>
    <p>
        1. []기호를 이용하기
        2. new Array()객체를 생성하기.
    </p>

    <script>
        let arr=[];//반배열을 선언함.
        console.log(arr);

        //선언과 동시에 초기화
        arr=["라면",'부침개',11,()=>{alert("배열안 함수")},{name:"chan",age:19}];
        console.log(arr);

        //new Array()객체 생성하기
        let arr2=new Array();
        console.log(arr2);

        arr2=new Array(20);
        console.log(arr2);
        
        arr2=new Array("라면",'부침개',11,()=>{alert("배열안 함수")});
        console.log(arr2);

        // 각 인덱스에 있는 배열값에 접근하기
        console.log(arr[0])
        console.log(arr[2])

        //배열안에 들어가 있는 함수 호출하기
        arr[3]();

        //배열안에 객체 접근하기
        console.log(arr[4].name);
        console.log(arr[4].age);

        for(let i=0;i<arr.length;i++){
            console.log(arr[i]);
        }
        console.log(arr.length);

        //배열에 대입하기
        arr[4]=()=>{
            console.log("새로 추가 함수")
        };
        console.log(arr[4]);

        //인덱스 범위넘어서 선언하는 경우
        console.log(` 선언 전 : ${arr.length}`);
        arr[20]="가능하다.";
        console.log(` 선언 후 : ${arr.length}`);
        console.log(arr);
    </script>

    <h2>배열 내장함수 이용하기</h2>
    <p>배열을 함수를 통해 유용하게 이용할 수 있는 기능</p>
    
    <h3>indexof(매개변수)</h3>
    <p>배열에서 매개 변수 값과 일치하는 값의 인덱스를 반환해주는 것</p>
    <script>
        let student=["a","b","c","d","e"]
        let index=student.indexOf("c"); // 2
        console.log(index);
        
        // 찾는 값이 없는 경우
        index=student.indexOf("s"); // -1
        console.log(index);
    </script>

    <input type="text" id="city" placeholder="지역명을 입력하세요">
    <button onclick="checkCity();">확인</button>
    <div id="target"></div>
    <script>
        const checkCity=()=>{
            let city=["서울","대전","대구","부산","광주","목포","포항"];
            let target=document.getElementById("target");
            let val=document.getElementById("city").value;
            let result=city.indexOf(val);
            if(result!=-1){
                target.innerHTML=`당신이 찾은 지명 : ${val} 인덱스 : ${result}`;
            } else {
                target.innerHTML=`찾는 지명이 없습니다.`;
            }

        }
    </script>

    <h3>concat()</h3>
    <p>
        두 개이상의 배열을 합쳐주는 함수
        원본값을 변경화는 것은 아니고 합친 새로운 배열을 반환
    </p>
    <button onclick="concatTest();">concatTest</button>
    <div id="area"></div>
    <script>
        const concatTest=()=>{
            let are=document.getElementById("area");
            let animal=["강아지","고양이","하마","카피바라","코뿔소"];
            let food=["시리얼","돈까스","가브리살","닭발"];
            let color=["red","blue","green","black"];
            let result=animal.concat(food,color);
            area.innerHTML+=`concat결과 : ${result}<br>`;
            area.innerHTML+=`animal : ${animal}<br>`;
            area.innerHTML+=`food : ${food}<br>`;
        }
    </script>

    <h3>join()</h3>
    <p>배열을 문자열로 변환해주는 함수</p>
    <button onclick="joinTest();">join</button>
    <div id="area1"></div>
    <script>
        const joinTest=()=>{
            let hobby=["운동","코딩","산책","게임"];
            let area=getEl("area1");
            let strArr=hobby.join(",");
            area.innerHTML+=`합친 결과 : ${strArr} ${typeof(strArr)}<br>`;
        }
    </script>
    

    <h3>reverse()</h3>
    <p>배열의 순서를 변경해주는 함수</p>
    <button onclick="reverseTest();">배열순서변경</button>
    <script>
        const reverseTest=()=>{
            let numArr=[1,3,7,9,2,1,4];
            console.log(`변경전 ${numArr}`);
            numArr.reverse();
            console.log(`변경후 ${numArr}`);
            
            let strArr=["가","나","다","라"];
            strArr.reverse();
            console.log(`${strArr}`);
        }
    </script>

    <h3>sort</h3>
    <p>정렬하는 함수(오름차순(default), 내림차순)</p>
    <button onclick="sortTest();">정렬하기</button>
    <div id="area2"></div>
    <script>
        const sortTest=()=>{
            let area=getEl("area2");
            let numArr=[1,7,6,4,9,3,5,2];
            area.innerHTML+=`정렬전 : ${numArr}<br>`;
            numArr.sort();
            area.innerHTML+=`정렬 후 : ${numArr}<br>`;
            // area.innerHTML+=`정렬 후 : ${numArr.sort()}<br>`;

            let strArr=['가','하','차','나','다','카','타'];
            area.innerHTML+=`정렬전 : ${strArr}<br>`;
            strArr.sort();
            area.innerHTML+=`정렬후 : ${strArr}<br>`;
        

            //내림차순정렬은 로직 -> 자바처럼
            //매개변수 함수를 전달 매개변수 두개 left,right return 0||+||-
            numArr.sort(function(l,r){return r-l});
            area.innerHTML+=`내림정렬후 : ${numArr}<br>`;

            // strArr.sort((l,r)=>{
            //     if(r>l) return 1;
            //     else if(l>r) return -1;
            //     else return 0;
            // });
            const s=(l,r)=>{
                if(r>l) return 1;
                else if(l>r) return -1;
                else return 0;
            }
            strArr.sort(s);
            area.innerHTML+=`내림정렬후 : ${strArr}<br>`;
        }
    </script>

    <h3>배열의 데이터를 조작하는 함수</h3>
    <p>
        push() : 배열의 마지막 인덱스에 값을 추가하는 것
        pop() : 배열의 마지막 인덱스를 삭제
    </p>
    <script>
        let arrItem=["방패","검","도끼","지팡이"];
        console.log(arrItem);
        arrItem.push("로브");
        arrItem.push("물약");
        console.log(arrItem);
        
        arrItem.pop();
        arrItem.pop();
        arrItem.pop();
        console.log(arrItem);
    </script>

    <p>
        unshift() : 배열의 앞에 추가하는 것
        shift() : 배열의 앞에 삭제
    </p>
    <script>
        arrItem.unshift("총");
        arrItem.unshift("도비");
        console.log(arrItem);
        
        arrItem.shift();
        arrItem.shift();
        console.log(arrItem);
    </script>

    <input type="text" id="arrValue" name="arrValue">
    <button onclick="arrAdd();">배열에 뒤에추가</button>
    <button onclick="arrDel();">배열에 뒤에삭제</button>
    <div id="area3"></div>
    <script>
        let arrTest=[];
        const arrAdd=()=>{
            let val=document.getElementById("arrValue").value;
            arrTest.push(val);
            
            let el=document.getElementById("area3");
            el.innerHTML=arrTest;
        }

        const arrDel=()=>{
            arrTest.pop();
            
            let el=document.getElementById("area3");
            el.innerHTML=arrTest;
        }
    </script>

    <p>
        slice() : 배열의 일부를 짤라내서 새 배열로 생성
        slice(시작인덱스[,끝인덱스]); - 시작만 적으면 시작부터 배열의 마지막 까지의 범위
        splice() : 배열의 특정위치 값을 지우고, 그 위치에 새로운 값을 추가
        splice(시작, 지울갯수, 추가할 값[,...]);
    </p>
    <script>
        let language=["java","oracle","jdbc","html","css","javascript"];
        let front=language.slice(3); //원본값 수정X, 복사본 출력
        console.log(front);

        let db=language.slice(1,3);
        console.log(db);

        // 음수일 경우 뒤에서 부터 센다.
        db=language.slice(-2);
        console.log(db);

        db=language.slice(-4,-1);
        console.log(db);

        // 부분을 수정, 원본 값을 수정
        console.log(language);
        language.splice(3,2); //index 3위치부터 2개 원소
        console.log(language);
        language.splice(3,0,'change!!');    //지울 갯수가 0이면 해당 자리에 추가
        console.log(language);
        language.splice(1,2,'add!!');
        console.log(language);
    </script>

    <h2>배열에 있는 값을 필터, 찾는 함수</h2>
    <p>
        includes() : 특정 값이 배열에 있는지 여부를 확인하는 함수 (true/false)<br>
        find(함수) : 특정 기준에 맞는 요소를 찾는 함수 -> 제일 처음 찾은 요소를 반환
        filter(함수) : 특정기준에 맞는 데이터를 찾는 함수 -> 기준에 맞는 값 전체를 반환 -> 새 배열<br>
    </p>

    <button onclick="includeTest();">include</button>
    <button onclick="findTest()">find</button>
    <button onclick="filterTest()">filter</button>
    <script>
        let height=[170.3,160.4,178.5,180.2,184.3,185.2,189.5,190.2];
        
        const includeTest=()=>{
            console.log(height.includes(160.4));    //true
            console.log(height.includes(200));      //false
        }

        const findTest=()=>{
            // 배열에서 매개변수 함수기준에 맞는 한개의 값 찾기
            let result=height.find((v)=>{
                // 처음부터 조건을 하나씩 살펴봄, 매개변수 return값이 true가 나오면 탐색 중지(하나 값만 반환)
                return v>180;
            });
            console.log(`결과 : ${result} ${typeof(result)}`)
        }

        const filterTest=()=>{
            let result=height.filter((v)=>{
                //매개변수 함수의 return값이 true인 전체 값 -> 배열
                return 180<v;
            });
            console.log(`결과  : ${result} ${typeof(result)}`);
            console.log(`결과  : ${result} ${Object.prototype.toString.call(result)}`);
        }
    </script>

    <h2>배열값 순회하는 함수</h2>
    <p>
        forEach() : 배열에 있는 값 전체를 접근하는 것, 매개변수로 함수(v(value),i(index),a(array))를 사용함
    </p>
    <button onclick="forEachTest();">전체순회하기</button>
    <script>
        // 배열 순회 시 기본 for문으로 인덱스 접근
        const forEachTest=()=>{
            // for(let i=0;i<height.length;i++){
            //     console.log(height[i]);
            // }

            height.forEach((v,i,a)=>{
                // v값에 배열의 첫번째 인덱스부터 차례대로 값을 대입하는 변수
                console.log(v,i,a);
            });

            // forEach함수는 기본적으로 자료형이 배열에서만 활용이 가능
            // button태그 다 가져오기
            let btns=document.getElementsByTagName("button");
            console.log(btns);
            console.log(Object.prototype.toString.call(btns));      //Collection
            console.log(Object.prototype.toString.call(height));    //Array

            
            // HTMLCollection에서 가능한지 확인 <- 배열 형식을 가지는 Object
            // Array 객체에 있는 것이기에 불가능 함
            // btns.forEach((v)=>{
            //     console.log(v); // 에러 발생
            // });

            // 일일이 순회해야 한다.
            for(let i=0;i<btns.length;i++){
                console.log(btns[i]);
            }

            // call함수를 이용해서 Array객체의 메소드를 빌려 사용할 수 있다.
            // 조건
            // 1. key값이 인덱스 0....1 형식이어야 한다.
            // 2. length가 있어야 한다.
            Array.prototype.forEach.call(btns,(v,i,a)=>{
                console.log(v);
            });
        }
    </script>

    <h3>누적계산을 해주는 함수</h3>
    <p>
        reduce(함수[,초기값]) : 특정 변수에 매개변수의 return값을 지속 저장하는 함수
        매개변수로 전달된 함수의 매개변수
        첫번째 변수 : 누적시키는 변수
        두번째 변수 : 다음값
        return 값 : 첫번째 변수에 저장
    </p>
    <button onclick="reduceTest();">reduceTest</button>
    <script>
        const reduceTest=()=>{
            console.log(height)

            let result=height.reduce(function(total,nextVal){
                console.log(total,nextVal);
                return total+nextVal;
            });
            console.log(`합계 : ${Math.ceil(result)} 평균 : ${result/height.length}`);

            // // 두번째 매개변수가 있을 경우 첫 번째 값을 두번째 매개 변수로 사용하며 없는 경우 배열 첫번째 원소 사용한다.
            // let result=height.reduce(function(total,nextVal){
            //     console.log(total,nextVal);
            //     return total+nextVal;
            // },100);
        }
    </script>

    

    <script>
        const getEl=(id)=>{
            return document.getElementById(id);
        }
    </script>
</body>
</html>